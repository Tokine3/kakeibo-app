# 家計簿アプリ デザイン設計書

## コンセプト
シンプルで直感的な操作で日々の収支を記録できる家計簿アプリ。カテゴリと金額を入力するだけで完結する簡単な操作性を重視し、月別・年別の収支をグラフで視覚的に把握できる。

## デザイン方針
- **iOS Human Interface Guidelines (HIG)** に準拠
- **モバイル縦向き (9:16)** と **片手操作** を前提
- シンプルで分かりやすいUI
- 入力の手間を最小限に
- データの可視化を重視

## カラースキーム
- **Primary**: `#0a7ea4` (青緑系) - アクセントカラー、ボタン、グラフ
- **Background**: Light `#ffffff` / Dark `#151718`
- **Surface**: Light `#f5f5f5` / Dark `#1e2022` - カード背景
- **Success**: `#22C55E` (緑) - 収入、プラス表示
- **Error**: `#EF4444` (赤) - 支出、マイナス表示
- **Warning**: `#F59E0B` (オレンジ) - 警告、注意喚起

## 画面構成

### 1. ホーム画面 (Home)
**主要コンテンツ:**
- 今月の収支サマリー (収入・支出・差額)
- 前月比の比較表示 (パーセンテージと矢印)
- 今月の支出カテゴリ別グラフ (円グラフ)
- 最近の取引履歴 (最新5件)

**機能:**
- 「収入を追加」ボタン (緑色)
- 「支出を追加」ボタン (赤色)
- 取引履歴タップで編集画面へ遷移

**レイアウト:**
- 上部: サマリーカード (大きく目立つ)
- 中央: 円グラフ
- 下部: 取引履歴リスト

### 2. 月別画面 (Monthly)
**主要コンテンツ:**
- 月選択ピッカー (スワイプで前後の月に移動)
- 選択月の収支サマリー
- 前月比の比較
- カテゴリ別支出の棒グラフ
- 月間の取引履歴リスト (カテゴリ別にグループ化)

**機能:**
- 月の切り替え (左右スワイプまたはピッカー)
- 取引の追加・編集・削除
- カテゴリフィルター

### 3. 年別画面 (Yearly)
**主要コンテンツ:**
- 年選択ピッカー
- 選択年の収支サマリー
- 昨年比の比較
- 月別収支の折れ線グラフ (収入・支出・差額)
- 年間カテゴリ別支出の円グラフ

**機能:**
- 年の切り替え
- 月別データの詳細表示

### 4. カテゴリ管理画面 (Categories)
**主要コンテンツ:**
- カテゴリリスト (アイコン + 名前)
- デフォルトカテゴリ (食費、交通費、娯楽、光熱費、通信費、医療費、その他)
- カスタムカテゴリ

**機能:**
- カテゴリの追加 (名前、アイコン、色)
- カテゴリの編集
- カテゴリの削除 (使用中の場合は警告)
- カテゴリの並び替え

### 5. 取引追加・編集画面 (Add/Edit Transaction)
**主要コンテンツ:**
- タイプ選択 (収入/支出) - セグメントコントロール
- 金額入力 (大きなテンキー)
- カテゴリ選択 (支出の場合のみ)
- 日付選択 (デフォルトは今日)
- メモ入力 (オプション)

**機能:**
- 保存ボタン
- キャンセルボタン
- 削除ボタン (編集時のみ)

**レイアウト:**
- モーダル形式
- 下から上にスライドして表示
- 片手で操作しやすいボタン配置

### 6. 設定画面 (Settings)
**主要コンテンツ:**
- テーマ設定 (ライト/ダーク/自動)
- 通貨設定
- データのエクスポート
- データのインポート
- アプリについて

## 主要なユーザーフロー

### フロー1: 支出を記録する
1. ホーム画面で「支出を追加」ボタンをタップ
2. 取引追加画面が下からスライドイン
3. 金額を入力 (テンキー)
4. カテゴリを選択 (タップ)
5. 必要に応じて日付・メモを入力
6. 「保存」ボタンをタップ
7. ホーム画面に戻り、サマリーとグラフが更新される

### フロー2: 取引を編集する
1. ホーム画面または月別画面で取引をタップ
2. 取引編集画面が表示される
3. 金額、カテゴリ、日付、メモを編集
4. 「保存」ボタンをタップ
5. 元の画面に戻る

### フロー3: カテゴリを追加する
1. カテゴリ管理画面で「+」ボタンをタップ
2. カテゴリ追加画面が表示される
3. カテゴリ名を入力
4. アイコンと色を選択
5. 「保存」ボタンをタップ
6. カテゴリリストに追加される

### フロー4: 月別の収支を確認する
1. タブバーから「月別」タブをタップ
2. 月別画面が表示される
3. 左右スワイプまたはピッカーで月を切り替え
4. 選択月の収支サマリーとグラフを確認
5. 取引履歴をスクロールして詳細を確認

### フロー5: 年別の収支を確認する
1. タブバーから「年別」タブをタップ
2. 年別画面が表示される
3. 年を選択
4. 年間の収支サマリーとグラフを確認
5. 月別データをタップして詳細を確認

## タブバー構成
1. **ホーム** (house.fill) - メイン画面
2. **月別** (calendar) - 月別収支
3. **年別** (chart.bar.fill) - 年別収支
4. **カテゴリ** (folder.fill) - カテゴリ管理
5. **設定** (gear) - 設定

## データ構造

### Transaction (取引)
- id: string
- type: "income" | "expense"
- amount: number
- categoryId: string (支出の場合のみ)
- date: Date
- memo: string (オプション)
- createdAt: Date
- updatedAt: Date

### Category (カテゴリ)
- id: string
- name: string
- icon: string
- color: string
- isDefault: boolean
- order: number
- createdAt: Date
- updatedAt: Date

## インタラクション

### ボタン
- **Primary buttons**: Scale (0.97) + haptic (Light)
- **List items**: Opacity (0.7) on press
- **Icons**: Opacity (0.6) on press

### アニメーション
- 画面遷移: 250ms fade
- ボタンフィードバック: 80ms scale
- グラフの描画: 400ms ease-out

### ハプティクス
- ボタンタップ: Light
- 保存成功: Success
- 削除: Warning
- エラー: Error

## 技術スタック
- React Native + Expo
- TypeScript
- NativeWind (Tailwind CSS)
- AsyncStorage (ローカルデータ保存)
- React Native Reanimated (アニメーション)
- expo-haptics (触覚フィードバック)
- Chart library (グラフ表示)
